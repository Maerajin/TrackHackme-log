## TryHackMe: Linux Shells


## 실습 일시
 - 2025-12-23


## 실습 주제
(1) Introduction
 - 이 장에서는 어떻게 기기들이 연결을 통해 데이터를 주고받는지 우리가 Ip라 불리는 것을 어떻게 어떤 형식으로 받는지에 대한 의문의 답을 알려줄 것이다.
 - 이번 장에서 배울 목표들
   1) Dynamic Host Configuration Protocol (DHCP)
   2) Address Resolution Protocol (ARP)
   3) Network Address Translation (NAT)
   4) Internet Control Message Protocol (ICMP)
      - Ping
      - Traceroute

(2) DHCP : Give me My Networing Settings
 - 우리가 카페에 가서 문서 작업을 한다고 생각해보라. 커피를 시키고 자리에 앉아 노트북을 펴는 순간 노트북은 자동적으로 카페 와이파이에 연결되어 인터넷을 가능하게 할 것이다. 네트워크에 접근하기 위해서는 다음과 같은 최소한의 설정이 있어야 한다.
   1) IP Address along with subnet mask
   2) Router (or Gateway)
   3) DNS server
 - 이렇게 자동적으로 연결되는 것은 와이파이가 해당 기기의 IP주소를 기억하고 재할당하기 때문인데 이 방식은 여러가지 장점이 있다.
   1) 접속할 때마다 일일이 수동으로 접속할 필요가 없다. 이러한 장점은 특히 모바일 기기에서 부각된다.
   2) IP 충돌이 일어나지 않게 한다.
 - IP 할당 역할을 하는 프로토콜이 DHCP(Dynamic Host Configuration Protocol)이다.
 - DHCP는 응용 계층의 프로토콜로, 서버는 UDP 67번 포트를 사용하고 사용자는 68번 포트를 사용한다. 스마트폰이나 노트북들은 기본적으로 DHCP를 사용하도록 설정되어있다.
 - DHCP는 네가지 단계를 따른다. : Discover, Offer, Request, Acknowledge (DORA)
   1) DHCP Discover : 사용자는 DHCPDISCOVER메시지를 브로드캐스트하여 어딘가에 있을 서버에 보낸다.
   2) DHCP Offer : 서버는 DHCPOFFER메시지를 베정할 IP주소와 함께 클라이언트에게 응답한다.
   3) DHCP Request : 클라이언트는 서버가 배정한 IP주소를 승낙한다고 알려주는 DHCPOFFER메시지를 응답한다.
   4) DHCP Akknowledge : 서버는 클라이언트에게 DHCPACK메시지를 보내서 승낙한 IP주소를 배정했다고 응답한다.
        
(3) ARP : Bridging Layer 3 Addressing to Layer 2 Addressing
 - 두 개의 호스트가 네트워크를 통해서 소통을 하려면 2계층은 데이터링크 계층을 통해 넘어오면서 IP패킷이 캡슐화되어야 한다.
 - 데이터 링크 계층은 이더넷 (IEEE 802.3)과 와이파이(IEEE 802.11)를 사용한다.
 - 이더넷과 와이파이를 사용할 때 MAC주소를 통해 사용자를 판별한다. 하지만 통신하는 때마다 MAC주소를 확인하지는 않는다.
 - 통신할 시 MAC주소가 필요하면서 매 통신마다 필요 없다는 것이 무슨 의미일까? 이 문제의 해답은 IP주소에 있다.
 - 시작하기 전에, 이더넷 프레임의 헤더는 다음과 같은 정보를 가진다.
   1) Destination MAC address
   2) Source MAC address
   3) Type (IPv4 in this case)
 - Address Resolutin Protocol(ARP)는 이더넷에 접속해있는 다른 기기의 MAC address를 찾을 수 있게 한다.
 - ARP의 통신 방식은 DHCP와 유사하다. DHCP를 생각해보면 쉽게 이해할 수 있다.
   1) 클라이언트가 어딘가에 있을 서버를 향해 A IPaddress에 대한 MAC address가 무엇인지 물어보는 ARP Request를 브로드캐스트한다.
   2) 서버는 클라이언트에게 답변이 담긴 ARP Reply를 보낸다.

(4) ICMP : Troubleshooting Networks
 - Internet Control Message Protocol(ICMP)는 주로 네트워크 진단이나 오류 보고 시에 사용한다. 다음 두 명령어는 ICMP에 의존적이고, 네트워크 트러블슈팅이나 네트워크 보안의 기초이다.
   1) ping : 이 명령어는 ICMP를 사용하여 목적지까지의 연결성을 테스트하고 round-trip time(RTT)를 측정한다. 바꿔 말하면, 대상이 살아있는지 대답은 할 수 있는지 알아볼 떄 사용한다. (ICMP Echo Request, ICMP Echo Reply)
   2) traceroute : 이 명령어는 리눅스나 유닉스 계열 운영체제에서는 traceroute, 윈도우 운영체제에서는 trace불린다. 호스트에서 목적지로 가는 길을 찾기 위해 ICMP를 사용한다.
 
(5) Routing
 - 인터넷에서 우리는 어떻게 네트워크끼리 데이터를 주고받는지 정확히 말하면 어떤 경로를 통하여 데이터를 주고받는지 알 필요가 있다.

(6) NAT
 - sudo ./flag_hunt.sh : 루트계정으로 해당 파일을 실행. 권한을 다 무시하고 열 수 있다.

(7) Closing Notes
 - 이제까지 뭘 배웠는지에 대한 간단한 복습


## 실무 적용 가능성
 - 리눅스에 사용하는 간단한 명령어부터 쉥에 대한 조작 명령어, 리눅스에서 스크립트를 작성하는 법까지 배웠는데 현장에서는 리눅스를 많이 쓴다고 하니 오늘 배운 지식은 잊어버리더라도 금방 다시 떠올릴 수 있게 해야한다.
 - 현장에서 컴파일러로 무엇을 쓸지는 알 수 없지만 컴파일러 없이도 스크립트를 작성할 수 있는 능력을 현장에서 중요하게 볼 것 같다.  


## 느낀 점
 - 요즘 너무 스크립트 작성같은 것을 등한시해서 작성하는데 어려움이 많았다.
 - 리눅스에 대해 기초적이고 개념적인 것만 배웠는데 이렇게 쉘을 통해서 실습을 하니 예전 처음 코딩했을 때가 생각났다.
 - 요즘 들어 정보보안이라는 진로에 대해 의구심이 많이 생겼으나 이번 실습으로 인하여 그러한 의구심이 조금은 해소된 느낌이 들었다.
    
## 실습 화면 기록
![실습 결과](images/Linux_Shells.png)
